# 超市管理系统

一个功能完善的超市管理系统，采用Python开发，支持商品管理、库存管理、销售管理和数据统计等核心功能。

## 系统特点

- ✅ **功能完整**：商品管理、库存管理、销售管理、统计报表
- 💾 **数据持久化**：JSON格式存储，自动保存
- 📊 **丰富统计**：销售统计、库存统计、热门商品排行
- 🔔 **智能预警**：库存不足自动预警
- 📤 **数据导出**：支持CSV格式导出导入
- 🧪 **测试完善**：19个单元测试全部通过

## 文件结构

```
supermarket_product.py          # 商品类和销售记录类定义
supermarket_system.py           # 系统核心业务逻辑
supermarket_data_manager.py     # 数据持久化管理
supermarket_cli.py              # 命令行交互界面
supermarket_main.py             # 系统主入口
test_supermarket_system.py      # 单元测试
supermarket_data.json           # 数据文件（自动生成）
```

## 核心功能

### 1. 商品管理
- 添加商品：录入商品信息（名称、类别、价格、库存等）
- 删除商品：移除不需要的商品
- 修改商品：更新商品信息
- 查看商品：查看所有商品或商品详情
- 搜索商品：按名称、类别搜索

### 2. 库存管理
- 商品入库：增加库存数量
- 商品出库：减少库存数量（非销售）
- 库存统计：查看库存总量和价值
- 库存预警：自动检测库存不足的商品

### 3. 销售管理
- 销售商品：记录销售交易
- 退货处理：处理退货请求
- 销售记录：查看历史销售记录
- 销售统计：查看销售额、销量等统计数据

### 4. 统计报表
- 库存报表：库存总量、总价值统计
- 销售报表：销售额、销售量统计
- 热门商品：按销量排行
- 商品明细：单个商品的销售详情

### 5. 数据管理
- 自动保存：操作后自动保存数据
- 手动保存：手动触发数据保存
- 数据备份：备份数据文件
- CSV导出：导出商品数据为CSV格式
- CSV导入：从CSV文件导入商品数据

## 运行环境

- **Python版本**：Python 3.6 或更高版本
- **依赖库**：无需额外依赖，仅使用Python标准库

## 快速开始

### 运行系统

```bash
# 启动超市管理系统
python3 supermarket_main.py

# 或直接运行CLI
python3 supermarket_cli.py
```

### 运行测试

```bash
# 执行单元测试
python3 test_supermarket_system.py
```

### 测试独立模块

```bash
# 测试商品类
python3 supermarket_product.py

# 测试核心系统
python3 supermarket_system.py

# 测试数据管理器
python3 supermarket_data_manager.py
```

## 使用示例

### 示例1：添加商品

进入系统后：
1. 选择 `1. 商品管理`
2. 选择 `1. 添加商品`
3. 依次输入：商品名称、类别、价格、库存等信息
4. 系统自动生成商品编号并保存

### 示例2：销售商品

1. 选择 `3. 销售管理`
2. 选择 `1. 销售商品`
3. 输入商品编号和销售数量
4. 系统自动计算总价、更新库存、生成销售记录

### 示例3：查看统计

1. 选择 `4. 统计报表`
2. 选择 `2. 销售报表`
3. 选择统计方式（总体统计或按日期范围）
4. 查看销售额、销售量等统计数据

## 数据结构

### 商品（Product）
- product_id: 商品编号（自动生成）
- name: 商品名称
- category: 商品类别
- price: 商品价格
- stock: 库存数量
- supplier: 供应商
- description: 商品描述
- sales_count: 累计销量
- min_stock: 最小库存预警值

### 销售记录（SalesRecord）
- record_id: 记录编号（自动生成）
- product_id: 商品编号
- product_name: 商品名称
- quantity: 销售数量
- unit_price: 单价
- total_price: 总价
- timestamp: 销售时间

## 测试结果

所有19个单元测试全部通过：

- ✅ 商品类测试（6个）
- ✅ 系统核心功能测试（10个）
- ✅ 数据管理器测试（3个）

```
Ran 19 tests in 0.006s
OK
```

## 系统架构

```
┌─────────────────────────────────────────┐
│         超市管理系统架构                │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐  │
│  │    supermarket_cli.py             │  │
│  │    (命令行界面层)                 │  │
│  └───────────────────────────────────┘  │
│                 ↓                       │
│  ┌───────────────────────────────────┐  │
│  │    supermarket_system.py          │  │
│  │    (业务逻辑层)                   │  │
│  │  - 商品管理                       │  │
│  │  - 库存管理                       │  │
│  │  - 销售管理                       │  │
│  │  - 统计分析                       │  │
│  └───────────────────────────────────┘  │
│                 ↓                       │
│  ┌───────────────────────────────────┐  │
│  │    supermarket_data_manager.py    │  │
│  │    (数据持久化层)                 │  │
│  │  - JSON存储                       │  │
│  │  - 备份管理                       │  │
│  │  - CSV导入导出                    │  │
│  └───────────────────────────────────┘  │
│                 ↓                       │
│  ┌───────────────────────────────────┐  │
│  │    supermarket_product.py         │  │
│  │    (数据模型层)                   │  │
│  │  - Product类                      │  │
│  │  - SalesRecord类                  │  │
│  └───────────────────────────────────┘  │
│                                         │
└─────────────────────────────────────────┘
```

## 注意事项

1. **数据安全**：系统会自动保存数据到`supermarket_data.json`，请定期备份
2. **库存管理**：请合理设置最小库存预警值，及时补货
3. **销售记录**：销售记录一旦生成，除非退货否则不可删除
4. **CSV导入**：导入CSV时会自动生成新的商品编号

## 扩展建议

系统采用模块化设计，易于扩展：

- 增加用户权限管理
- 支持批量导入导出
- 添加图形界面
- 支持数据库存储
- 增加报表打印功能
- 添加条形码扫描支持

## 开发者

基于Python标准库开发，遵循面向对象设计原则，代码结构清晰，易于维护和扩展。

---

**版本**: 1.0.0  
**更新日期**: 2025-10-22  
**许可**: MIT License
