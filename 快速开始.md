# å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ç³»ç»Ÿæ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ,åŸºäºFastAPIæ¡†æ¶å¼€å‘,å®ç°äº†å­¦ç”Ÿä¿¡æ¯ç®¡ç†ã€æˆç»©ç®¡ç†ã€ç»Ÿè®¡åˆ†æç­‰åŠŸèƒ½ã€‚

## é¡¹ç›®ç‰¹ç‚¹

âœ… **å®Œæ•´çš„åˆ†å±‚æ¶æ„**: è¡¨ç°å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚ã€æ•°æ®å­˜å‚¨å±‚
âœ… **RESTful APIè®¾è®¡**: éµå¾ªRESTè§„èŒƒ,ç»Ÿä¸€çš„å“åº”æ ¼å¼
âœ… **JWTèº«ä»½è®¤è¯**: åŸºäºä»¤ç‰Œçš„å®‰å…¨è®¤è¯æœºåˆ¶
âœ… **å¤šè§’è‰²æƒé™æ§åˆ¶**: ç®¡ç†å‘˜ã€æ•™å¸ˆã€å­¦ç”Ÿä¸‰ç§è§’è‰²
âœ… **å®Œå–„çš„æ•°æ®éªŒè¯**: Pydanticæ•°æ®éªŒè¯,ç¡®ä¿æ•°æ®è´¨é‡
âœ… **è‡ªåŠ¨APIæ–‡æ¡£**: Swagger/ReDocè‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£
âœ… **å•å…ƒæµ‹è¯•è¦†ç›–**: åŒ…å«å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: FastAPI 0.104
- **æ•°æ®åº“**: SQLite (å¯åˆ‡æ¢PostgreSQL)
- **ORM**: SQLAlchemy 2.0
- **æ•°æ®éªŒè¯**: Pydantic 2.0
- **è®¤è¯**: JWT (python-jose)
- **æµ‹è¯•**: Pytest

## ç›®å½•ç»“æ„

```
Qoder2/
â”œâ”€â”€ app/                        # åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ v1/                 # API v1ç‰ˆæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py         # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ students.py     # å­¦ç”Ÿç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ grades.py       # æˆç»©ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ statistics.py   # ç»Ÿè®¡åˆ†ææ¥å£
â”‚   â”‚   â””â”€â”€ deps.py             # ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ security.py         # å®‰å…¨æ¨¡å—(JWTã€å¯†ç )
â”‚   â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â””â”€â”€ middleware.py       # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹(SQLAlchemy)
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ student.py          # å­¦ç”Ÿæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ class_model.py      # ç­çº§æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ course.py           # è¯¾ç¨‹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ grade.py            # æˆç»©æ¨¡å‹
â”‚   â”‚   â””â”€â”€ teaching.py         # æˆè¯¾æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/                # æ•°æ®æ¨¡å¼(Pydantic)
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ·schema
â”‚   â”‚   â”œâ”€â”€ student.py          # å­¦ç”Ÿschema
â”‚   â”‚   â”œâ”€â”€ class_schema.py     # ç­çº§schema
â”‚   â”‚   â”œâ”€â”€ course.py           # è¯¾ç¨‹schema
â”‚   â”‚   â”œâ”€â”€ grade.py            # æˆç»©schema
â”‚   â”‚   â””â”€â”€ statistics.py       # ç»Ÿè®¡schema
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ auth_service.py     # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ student_service.py  # å­¦ç”ŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ grade_service.py    # æˆç»©æœåŠ¡
â”‚   â”‚   â””â”€â”€ statistics_service.py # ç»Ÿè®¡æœåŠ¡
â”‚   â”œâ”€â”€ repositories/           # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ user_repo.py        # ç”¨æˆ·ä»“å‚¨
â”‚   â”‚   â”œâ”€â”€ student_repo.py     # å­¦ç”Ÿä»“å‚¨
â”‚   â”‚   â”œâ”€â”€ class_repo.py       # ç­çº§ä»“å‚¨
â”‚   â”‚   â”œâ”€â”€ course_repo.py      # è¯¾ç¨‹ä»“å‚¨
â”‚   â”‚   â””â”€â”€ grade_repo.py       # æˆç»©ä»“å‚¨
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ validators.py       # æ•°æ®éªŒè¯å™¨
â”‚       â”œâ”€â”€ helpers.py          # è¾…åŠ©å‡½æ•°
â”‚       â””â”€â”€ exceptions.py       # è‡ªå®šä¹‰å¼‚å¸¸
â”œâ”€â”€ tests/                      # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ conftest.py             # æµ‹è¯•é…ç½®
â”œâ”€â”€ main.py                     # åº”ç”¨å…¥å£
â”œâ”€â”€ init_db.py                  # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ requirements.txt            # ä¾èµ–åŒ…åˆ—è¡¨
â””â”€â”€ start.sh                    # å¿«é€Ÿå¯åŠ¨è„šæœ¬

```

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€: ä½¿ç”¨å¯åŠ¨è„šæœ¬(æ¨è)

```bash
chmod +x start.sh
./start.sh
```

### æ–¹æ³•äºŒ: æ‰‹åŠ¨å¯åŠ¨

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. åˆå§‹åŒ–æ•°æ®åº“
python init_db.py

# 3. å¯åŠ¨åº”ç”¨
python main.py
```

### è®¿é—®ç³»ç»Ÿ

- **åº”ç”¨åœ°å€**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs (Swagger UI)
- **APIæ–‡æ¡£**: http://localhost:8000/redoc (ReDoc)

### åˆå§‹è´¦å·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  |
|-----|-------|------|
| ç®¡ç†å‘˜ | admin | admin123 |
| æ•™å¸ˆ | teacher001 | teacher123 |

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯

- âœ… JWTä»¤ç‰Œç™»å½•
- âœ… ä»¤ç‰Œåˆ·æ–°
- âœ… å¯†ç ä¿®æ”¹
- âœ… è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### 2. å­¦ç”Ÿç®¡ç†

- âœ… åˆ›å»ºå­¦ç”Ÿ(ç®¡ç†å‘˜)
- âœ… æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨(æ”¯æŒåˆ†é¡µã€ç­›é€‰)
- âœ… æŸ¥è¯¢å­¦ç”Ÿè¯¦æƒ…
- âœ… æ›´æ–°å­¦ç”Ÿä¿¡æ¯
- âœ… åˆ é™¤å­¦ç”Ÿ(é€»è¾‘åˆ é™¤)

### 3. æˆç»©ç®¡ç†

- âœ… å½•å…¥æˆç»©
- âœ… æ‰¹é‡å½•å…¥æˆç»©
- âœ… æŸ¥è¯¢å­¦ç”Ÿæˆç»©
- âœ… æ›´æ–°æˆç»©
- âœ… åˆ é™¤æˆç»©

### 4. ç»Ÿè®¡åˆ†æ

- âœ… å­¦ç”Ÿæˆç»©ç»Ÿè®¡(å¹³å‡åˆ†ã€GPAã€åŠæ ¼ç‡ç­‰)
- âœ… ç­çº§æˆç»©ç»Ÿè®¡(åˆ†æ•°æ®µåˆ†å¸ƒ)
- âœ… è¯¾ç¨‹æˆç»©ç»Ÿè®¡(ä¼˜ç§€ç‡ã€åŠæ ¼ç‡)

## APIä½¿ç”¨ç¤ºä¾‹

### 1. ç™»å½•è·å–Token

```bash
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

å“åº”:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "expires_in": 1800,
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### 2. åˆ›å»ºå­¦ç”Ÿ

```bash
curl -X POST "http://localhost:8000/api/v1/students" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "student_id": "2024006",
    "name": "æ–°å­¦ç”Ÿ",
    "age": 20,
    "gender": "male",
    "major": "è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯",
    "enrollment_date": "2024-09-01"
  }'
```

### 3. æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨

```bash
curl -X GET "http://localhost:8000/api/v1/students?page=1&size=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 4. å½•å…¥æˆç»©

```bash
curl -X POST "http://localhost:8000/api/v1/grades" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "student_id": 1,
    "course_id": 1,
    "score": 85.5,
    "semester": "2024æ˜¥",
    "academic_year": 2024,
    "grade_type": "æœŸæœ«"
  }'
```

## æƒé™è¯´æ˜

### è§’è‰²æƒé™çŸ©é˜µ

| åŠŸèƒ½ | ç®¡ç†å‘˜ | æ•™å¸ˆ | å­¦ç”Ÿ |
|-----|-------|------|------|
| åˆ›å»ºå­¦ç”Ÿ | âœ… | âŒ | âŒ |
| æŸ¥çœ‹å­¦ç”Ÿåˆ—è¡¨ | âœ… | âœ… | âŒ |
| æŸ¥çœ‹å­¦ç”Ÿè¯¦æƒ… | âœ… | âœ… | ä»…æœ¬äºº |
| æ›´æ–°å­¦ç”Ÿä¿¡æ¯ | âœ… | âŒ | âŒ |
| åˆ é™¤å­¦ç”Ÿ | âœ… | âŒ | âŒ |
| å½•å…¥æˆç»© | âœ… | âœ… | âŒ |
| æŸ¥çœ‹æˆç»© | âœ… | âœ… | ä»…æœ¬äºº |
| ä¿®æ”¹æˆç»© | âœ… | âœ… | âŒ |
| ç»Ÿè®¡æŠ¥è¡¨ | âœ… | âœ… | ä»…æœ¬äºº |

## è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
pytest --cov=app tests/
```

## æ•°æ®éªŒè¯è§„åˆ™

### å­¦å·æ ¼å¼
- æ ¼å¼: 7ä½æ•°å­—(4ä½å¹´ä»½+3ä½åºå·)
- ç¤ºä¾‹: 2024001

### æˆç»©èŒƒå›´
- èŒƒå›´: 0-100
- ç±»å‹: æµ®ç‚¹æ•°

### å¹´é¾„èŒƒå›´
- èŒƒå›´: 0-150

### èº«ä»½è¯å·
- æ ¼å¼: 18ä½(17ä½æ•°å­—+1ä½æ ¡éªŒç )

### é‚®ç®±æ ¼å¼
- æ ‡å‡†é‚®ç®±æ ¼å¼éªŒè¯

### æ‰‹æœºå·æ ¼å¼
- ä¸­å›½å¤§é™†æ‰‹æœºå·: 1å¼€å¤´,11ä½æ•°å­—

## æˆç»©ç­‰çº§å’ŒGPA

### ç­‰çº§åˆ’åˆ†

| åˆ†æ•°åŒºé—´ | ç­‰çº§ | ç»©ç‚¹ |
|---------|------|------|
| 90-100 | A | 4.0 |
| 85-89 | A- | 3.7 |
| 82-84 | B+ | 3.3 |
| 78-81 | B | 3.0 |
| 75-77 | B- | 2.7 |
| 72-74 | C+ | 2.3 |
| 68-71 | C | 2.0 |
| 64-67 | C- | 1.7 |
| 60-63 | D | 1.0 |
| <60 | F | 0.0 |

## å¸¸è§é—®é¢˜

### 1. å¦‚ä½•ä¿®æ”¹æ•°æ®åº“é…ç½®?

ç¼–è¾‘ `app/core/config.py` æ–‡ä»¶,ä¿®æ”¹ `DATABASE_URL`:

```python
DATABASE_URL: str = "postgresql://user:password@localhost/dbname"
```

### 2. å¦‚ä½•ä¿®æ”¹JWTå¯†é’¥?

ç¼–è¾‘ `app/core/config.py` æ–‡ä»¶,ä¿®æ”¹ `SECRET_KEY`:

```python
SECRET_KEY: str = "your-new-secret-key"
```

### 3. å¦‚ä½•æ·»åŠ æ–°çš„APIæ¥å£?

1. åœ¨ `app/api/v1/` åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶
2. åœ¨ `main.py` ä¸­æ³¨å†Œè·¯ç”±
3. å®ç°å¯¹åº”çš„Serviceå’ŒRepository

### 4. å¦‚ä½•éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ?

```bash
# ä½¿ç”¨gunicornéƒ¨ç½²
gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker

# ä½¿ç”¨Dockeréƒ¨ç½²
# åˆ›å»ºDockerfileå¹¶æ„å»ºé•œåƒ
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ•°æ®åº“ç´¢å¼•**: åœ¨é«˜é¢‘æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
2. **ç¼“å­˜æœºåˆ¶**: ä½¿ç”¨Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
3. **åˆ†é¡µæŸ¥è¯¢**: æ‰€æœ‰åˆ—è¡¨æ¥å£å‡æ”¯æŒåˆ†é¡µ
4. **è¿æ¥æ± **: é…ç½®åˆç†çš„æ•°æ®åº“è¿æ¥æ± å¤§å°

## å®‰å…¨å»ºè®®

1. âœ… ä½¿ç”¨HTTPSåè®®
2. âœ… ä¿®æ”¹é»˜è®¤å¯†é’¥å’Œå¯†ç 
3. âœ… é…ç½®CORSç™½åå•
4. âœ… å®æ–½è®¿é—®é¢‘ç‡é™åˆ¶
5. âœ… å®šæœŸæ›´æ–°ä¾èµ–åŒ…
6. âœ… è®°å½•å®¡è®¡æ—¥å¿—

## åç»­å¼€å‘è®¡åˆ’

- [ ] è¯¾ç¨‹ç®¡ç†API
- [ ] ç­çº§ç®¡ç†API
- [ ] ç”¨æˆ·ç®¡ç†API
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- [ ] æ•°æ®å¯¼å…¥å¯¼å‡º
- [ ] æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½
- [ ] å‰ç«¯ç•Œé¢å¼€å‘

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥çœ‹:
- ğŸ“– APIæ–‡æ¡£: http://localhost:8000/docs
- ğŸ“ è®¾è®¡æ–‡æ¡£: é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„è®¾è®¡æ–‡æ¡£
- ğŸ› é—®é¢˜åé¦ˆ: æäº¤Issue

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-23)
- âœ… å®ŒæˆåŸºç¡€æ¶æ„æ­å»º
- âœ… å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½
- âœ… å®ç°å­¦ç”Ÿç®¡ç†åŠŸèƒ½
- âœ… å®ç°æˆç»©ç®¡ç†åŠŸèƒ½
- âœ… å®ç°ç»Ÿè®¡åˆ†æåŠŸèƒ½
- âœ… æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
