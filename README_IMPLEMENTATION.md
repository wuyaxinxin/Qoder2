# 学生管理系统实现说明

## 项目概述

基于设计文档实现的学生管理系统,采用多语言协作架构(Java + Python),提供学生、课程、教师管理及成绩统计分析功能。

## 目录结构

```
student-system-design-1761637287/
├── Student.java                    # 学生实体类
├── Teacher.java                    # 教师实体类
├── Course.java                     # 课程实体类
├── Person.java                     # 人员基类
├── DataStorage.java                # 数据存储层(JSON读写、备份)
├── StudentService.java             # 学生服务层
├── CourseService.java              # 课程服务层
├── TeacherService.java             # 教师服务层
├── GradeService.java               # 成绩服务层
├── StudentSystemDemo.java          # 系统演示程序
├── data_processor.py               # Python数据分析模块
├── generate_reports.py             # Python报表生成脚本
├── data/                           # 数据文件目录
│   ├── students.json               # 学生数据
│   ├── courses.json                # 课程数据
│   ├── teachers.json               # 教师数据
│   └── backups/                    # 数据备份目录
├── reports/                        # 报表输出目录
└── README_IMPLEMENTATION.md        # 本文件
```

## 核心功能

### 1. 数据存储层 (DataStorage.java)
- JSON文件读写功能
- 事务性写入保障
- 自动备份机制(保留最近3个版本)
- 数据完整性校验

### 2. 学生服务 (StudentService.java)
- 学生CRUD操作
- 按专业/年级/姓名搜索
- 优秀学生查询(平均分≥85)
- 成绩管理
- 输入验证(学号、姓名、年龄、邮箱等)

### 3. 课程服务 (CourseService.java)
- 课程CRUD操作
- 学生选课/退课
- 选课学生查询
- 教师授课列表
- 选课人数排名

### 4. 教师服务 (TeacherService.java)
- 教师CRUD操作
- 授课班级分配
- 资深教师查询(教龄≥10年)
- 工作量统计

### 5. 成绩服务 (GradeService.java)
- 成绩录入/更新
- 学生/课程成绩查询
- 平均分计算
- 课程通过率统计
- 已通过/未通过课程列表
- 成绩分布统计

### 6. 数据分析 (data_processor.py)
- 学生成绩分布统计
- 专业平均分排名
- 课程选课热度分析
- 教师工作量统计
- 优秀学生识别
- 课程通过率统计

### 7. 报表生成 (generate_reports.py)
生成六大报表:
1. 成绩分布报表
2. 专业统计报表
3. 课程热度报表
4. 教师工作量报表
5. 优秀学生名单
6. 课程通过率报表

## 使用说明

### 前置要求

1. **Java环境**: JDK 8或更高版本
2. **Python环境**: Python 3.7或更高版本
3. **依赖库**: 
   - Java: org.json库(已包含json.jar)
   - Python: 系统内置库，无需额外安装

### 运行演示程序

1. 编译Java文件:
```bash
javac -encoding UTF-8 -cp .:json.jar DataStorage.java StudentService.java CourseService.java TeacherService.java GradeService.java StudentSystemDemo.java
```

2. 运行演示程序:
```bash
java -cp .:json.jar StudentSystemDemo
```

演示程序会:
- 创建教师、课程、学生
- 执行选课操作
- 录入成绩
- 查询成绩和统计信息
- 将数据保存到 data/ 目录

### 生成数据分析报表

运行Python脚本:
```bash
python3 generate_reports.py
```

报表将保存在 `reports/` 目录,包含时间戳文件名。

## 数据文件格式

### students.json
```json
{
  "students": [
    {
      "studentId": "2021001",
      "name": "李明",
      "age": 20,
      "email": "liming@example.com",
      "major": "计算机科学",
      "grade": 3,
      "scores": {
        "CS101": 92.5,
        "CS102": 85.5
      }
    }
  ]
}
```

### courses.json
```json
{
  "courses": [
    {
      "courseId": "CS101",
      "courseName": "数据结构与算法",
      "instructor": "T001",
      "creditHours": 4,
      "description": "计算机科学基础课程",
      "startDate": "2025-09-01",
      "endDate": "2026-01-15",
      "enrolledStudents": ["2021001", "2021002"]
    }
  ]
}
```

### teachers.json
```json
{
  "teachers": [
    {
      "teacherId": "T001",
      "name": "张教授",
      "age": 45,
      "email": "zhang@example.com",
      "subject": "计算机科学",
      "title": "教授",
      "yearsOfExperience": 15,
      "classes": ["计科1班", "计科2班"]
    }
  ]
}
```

## 数据验证规则

### 学生信息验证
- 学号: 非空,≤20字符,仅字母数字
- 姓名: 2-50字符
- 年龄: 15-30岁
- 邮箱: 符合标准邮箱格式
- 专业: 非空,≤30字符
- 年级: 1-4

### 课程信息验证
- 课程ID: 非空,≤20字符,仅字母数字
- 课程名称: 非空
- 学分: 1-8
- 日期: 结束日期必须晚于开始日期

### 教师信息验证
- 教师ID: 非空,≤20字符,仅字母数字
- 姓名: 2-50字符
- 年龄: 25-70岁
- 邮箱: 符合标准邮箱格式
- 职称: 助教/讲师/副教授/教授
- 教龄: 0-50年

### 成绩验证
- 成绩范围: 0-100分
- 必须先选课才能录入成绩
- 不允许重复选课

## 业务逻辑

### 选课流程
1. 验证学生和课程是否存在
2. 检查是否已选该课程
3. 将学生添加到课程的选课列表
4. 为学生初始化该课程成绩(默认0)
5. 保存数据

### 成绩录入流程
1. 验证学生、课程是否存在
2. 验证成绩范围(0-100)
3. 验证选课关系
4. 录入/更新成绩
5. 自动计算平均分

### 退课流程
1. 从课程选课列表中移除学生
2. 删除学生该课程的成绩记录
3. 保存数据

### 删除操作
- **删除学生**: 同步清理所有课程中的选课记录
- **删除课程**: 同步清理所有学生的该课程成绩
- **删除教师**: 需先解除所有授课班级关系

## 数据备份机制

- 每次数据修改前自动备份
- 保留最近3个版本
- 备份文件命名: `文件名.时间戳`
- 支持手动从备份恢复

## 报表示例

### 成绩分布报表
```
============================================================
                  学生成绩分布统计报表                  
============================================================

  优秀(90-100)              5人  (25.00%)
  良好(80-89)               8人  (40.00%)
  中等(70-79)               4人  (20.00%)
  及格(60-69)               2人  (10.00%)
  不及格(0-59)              1人  ( 5.00%)

------------------------------------------------------------
  总计                     20人
```

## 技术亮点

1. **多语言协作**: Java负责业务逻辑,Python负责数据分析
2. **数据一致性**: 事务性写入,原子操作,关联数据同步
3. **输入验证**: 全面的数据验证机制
4. **备份机制**: 自动备份,版本管理
5. **服务分层**: 清晰的服务层架构
6. **可扩展性**: 易于添加新功能和报表

## 注意事项

1. 确保 `data/` 和 `reports/` 目录存在
2. Java文件编译时使用 UTF-8 编码
3. Python脚本需要在有数据文件的情况下运行
4. 首次运行会自动创建空的JSON数据文件
5. 数据文件损坏时可从备份恢复

## 扩展建议

未来可以考虑:
1. 添加Web界面(Flask/Django)
2. 使用关系数据库替代JSON文件
3. 添加用户认证和权限管理
4. 实现Excel批量导入导出
5. 添加可视化图表(matplotlib)
6. 实现邮件通知功能

## 联系信息

如有问题请参考设计文档或源代码注释。

---
**版本**: 1.0  
**日期**: 2025-10-28  
**基于设计文档**: student-system-design.md
